-- Connect to the 'master' database to run this snippet
USE master
GO
-- Uncomment the ALTER DATABASE statement below to set the database to SINGLE_USER mode if the drop database command fails because the database is in use.
ALTER DATABASE AB2Parc_apr27 SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
-- Drop the database if it exists
IF EXISTS (
	SELECT [name]
FROM sys.databases
WHERE [name] = N'AB2Parc_apr27'
)
DROP DATABASE AB2Parc_apr27
GO

SET DATEFORMAT ymd;
GO
CREATE DATABASE AB2Parc_apr27;
GO

USE AB2Parc_apr27;
GO

CREATE TABLE Berlok
(
	BerloID INT IDENTITY,
	BNev VARCHAR(50),
	BTelefon VARCHAR(50),
	BEmail VARCHAR(50),
	CONSTRAINT PK_Berlok_BerloID PRIMARY KEY (BerloID)
)

CREATE TABLE KozossegiIrodak
(
	KIrodaID INT IDENTITY,
	KINev VARCHAR(50)
		CONSTRAINT U_KINev UNIQUE(KINev),
	KICim VARCHAR(200),
	NyitasIdopontja TIME,
	NyitvatartasOrakSzama INT,
	ArPerOra INT,--/MONEY, 
	CONSTRAINT PK_KozossegiIrodak_KIrodaID PRIMARY KEY (KIrodaID)
)

CREATE TABLE Munkaasztalok
(
	MAID INT IDENTITY,
	MunkaAsztalSzam INT,
	KIrodaID INT,
	CONSTRAINT FK_Munkaasztalok_KozossegiIrodak FOREIGN KEY (KIrodaID) REFERENCES KozossegiIrodak(KIrodaID),
	CONSTRAINT PK_Munkaasztalok_MAID PRIMARY KEY (MAID)
)

CREATE TABLE Foglalasok
(
	FoglalasID INT IDENTITY,
	BerloID INT,
	MAID INT,
	Datum DATE,
	KezdIdo TIME,
	OrakSzama INT,
	FoglalasAra INT,--/MONEY,
	CONSTRAINT FK_Foglalasok_Berlok FOREIGN KEY (BerloID) REFERENCES Berlok(BerloID),
	CONSTRAINT FK_Foglalasok_MAID FOREIGN KEY (MAID) REFERENCES Munkaasztalok(MAID),
	CONSTRAINT PK_Foglalasok PRIMARY KEY (FoglalasID)
)


INSERT INTO Berlok
	(BNev, BTelefon, BEmail)
VALUES
	('Kiss János', '06-30-123-4567', 'janoskiss@gmail.com'),
	('Nagy Péter', '06-30-234-5178', 'nagypeti@gmail.com'),
	('Kovács Mária', '06-30-345-6789', 'kovacsmarcsi@yahoo.com'),
	('Tóth László', '06-30-456-7890', 'lacitoth@cit.hu'),
	('Szabó Zsuzsa', '06-30-567-8901', 'zsuzsisz@fermail.com'),
	('Horváth Gábor', '06-30-678-9012', 'gabici@nomail.com'),
	('Varga Katalin', '06-30-789-0123', 'katibogar@gmail.com'),
	('Fekete István', '06-30-890-1234', 'sotetpityu@demail.ro'),
	('Barna József', '06-30-901-2345', 'jozsiba@email.hu'),
	('Piros Ilona', '06-30-012-3456', 'ilicip@eposta.ro'),
	('Erdei Virág', '06-30-123-4167', 'virage@gmail.com'),
	('Mezei Virág', '06-30-234-2372', 'viragom@remail.hu')
GO
INSERT INTO KozossegiIrodak
	(KINev, KICim, NyitasIdopontja, NyitvatartasOrakSzama, ArPerOra)
VALUES
	('Közösségi Iroda 1', 'Budapest, Váci út 1.', '08:00', 8, 1000),
	('Közösségi Iroda 2', 'Budapest, Pecsi út 2.', '08:00', 8, 1200),
	('Közösségi Iroda 3', 'Budapest, Laci út 3.', '08:00', 8, 1500),
	('Közösségi Iroda 4', 'Budapest, Pali út 4.', '08:00', 8, 2000),
	('Közösségi Iroda 5', 'Budapest, Kiskunmajsai út 5.', '08:00', 8, 2500),
	('Közösségi Iroda 6', 'Budapest, Pesti út 6.', '08:00', 8, 3000),
	('Közösségi Iroda 7', 'Budapest, Budai út 7.', '08:00', 8, 3500),
	('Közösségi Iroda 8', 'Budapest, Debreceni út 8.', '08:00', 8, 4000),
	('Közösségi Iroda 9', 'Budapest, Gyori út 9.', '08:00', 8, 4500),
	('Közösségi Iroda 10', 'Budapest, Becsi út 10.', '08:00', 8, 5000)
GO
INSERT INTO Munkaasztalok
	(MunkaAsztalSzam, KIrodaID)
VALUES
	(1, 1),
	(2, 1),
	(3, 1),
	(4, 1),
	(5, 1),
	(6, 2),
	(7, 2),
	(8, 2),
	(9, 2),
	(10, 2),
	(11, 3),
	(12, 3),
	(13, 3),
	(14, 3),
	(15, 3),
	(16, 4),
	(17, 4),
	(18, 4),
	(19, 4),
	(20, 4),
	(21, 5),
	(22, 5),
	(23, 5),
	(24, 5),
	(25, 5),
	(26, 6),
	(27, 6),
	(28, 6),
	(29, 6),
	(30, 6),
	(31, 7),
	(32, 7),
	(33, 7),
	(34, 7),
	(35, 7),
	(36, 8),
	(37, 8),
	(38, 8),
	(39, 8),
	(40, 8),
	(41, 9),
	(42, 9),
	(43, 9),
	(44, 9),
	(45, 9),
	(46, 10),
	(47, 10),
	(48, 10),
	(49, 10),
	(50, 10)

GO

INSERT INTO Foglalasok
	(BerloID, MAID, Datum, KezdIdo, OrakSzama, FoglalasAra)
VALUES
	(9, 39, '2024-01-17', '15:00', 1, 6000),
	(4, 3, '2024-01-24', '08:00', 5, 5000),
	(5, 5, '2024-01-25', '11:00', 4, 4800),
	(6, 7, '2024-01-26', '12:00', 3, 3600),
	(7, 9, '2024-01-27', '13:00', 1, 3000),
	(8, 11, '2024-01-28', '14:00', 5, 7500),
	(9, 13, '2024-01-29', '15:00', 1, 6000),
	(1, 17, '2024-01-31', '09:00', 4, 4000),
	(2, 19, '2024-02-01', '10:00', 3, 3600),
	(3, 21, '2024-02-02', '14:00', 1, 3000),
	(4, 23, '2024-02-03', '08:00', 5, 5000),
	(5, 25, '2024-02-04', '11:00', 4, 4800),
	(6, 27, '2024-02-05', '12:00', 3, 3600),
	(7, 29, '2024-02-06', '13:00', 2, 3000),
	(8, 31, '2024-02-07', '14:00', 5, 7500),
	(9, 33, '2024-02-08', '15:00', 1, 6000),
	(7, 35, '2024-01-15', '13:00', 2, 3000),
	(9, 39, '2024-01-17', '15:00', 1, 6000),
	(4, 3, '2024-01-24', '08:00', 5, 5000),
	(5, 5, '2024-01-25', '11:00', 4, 4800),
	(6, 7, '2024-01-26', '12:00', 3, 3600),
	(7, 9, '2024-01-27', '13:00', 2, 3000),
	(8, 11, '2024-01-28', '14:00', 5, 7500),
	(9, 13, '2024-01-29', '15:00', 1, 6000),
	(1, 17, '2024-02-01', '09:00', 4, 4000),
	(2, 23, '2024-02-02', '10:00', 3, 3600),
	(3, 25, '2024-02-03', '14:00', 2, 3000),
	(4, 27, '2024-02-04', '08:00', 5, 5000),
	(5, 29, '2024-02-05', '11:00', 4, 4800),
	(6, 31, '2024-02-06', '12:00', 3, 3600),
	(7, 33, '2024-02-07', '13:00', 2, 3000),
	(8, 35, '2024-02-08', '14:00', 5, 7500),
	(9, 37, '2024-02-09', '15:00', 1, 6000),
	(1, 41, '2024-03-01', '09:00', 4, 4000),
	(2, 43, '2024-03-02', '10:00', 3, 3600),
	(3, 45, '2024-03-03', '14:00', 1, 3000),
	(4, 47, '2024-03-04', '08:00', 5, 5000),
	(5, 49, '2024-03-05', '11:00', 4, 4800),
	(6, 50, '2024-03-06', '12:00', 3, 3600),
	(7, 41, '2024-03-07', '13:00', 2, 3000),
	(8, 43, '2024-03-08', '14:00', 5, 7500),
	(9, 45, '2024-03-09', '15:00', 1, 6000),
	(2, 25, '2023-03-22', '10:00', 3, 3600),
	(3, 27, '2023-02-12', '14:00', 2, 3000),
	(4, 29, '2023-04-02', '08:00', 5, 5000),
	(5, 31, '2023-05-16', '11:00', 4, 4800),
	(8, 37, '2023-08-02', '14:00', 1, 7500),
	(9, 39, '2023-09-02', '15:00', 1, 6000),
	(1, 23, '2024-01-09', '09:00', 4, 4000),
	(2, 25, '2024-06-10', '10:00', 3, 3600),
	(3, 27, '2024-01-11', '14:00', 2, 3000),
	(4, 29, '2024-11-12', '08:00', 5, 5000),
	(6, 33, '2024-01-14', '12:00', 3, 3600),
	(7, 35, '2024-01-15', '13:00', 2, 3000),
	(5, 7, '2023-05-15', '11:00', 4, 4800),
	(6, 9, '2023-06-30', '12:00', 4, 3600),
	(7, 11, '2023-07-01', '13:00', 2, 3000),
	(8, 13, '2023-08-01', '14:00', 5, 7500),
	(9, 15, '2023-09-21', '15:00', 1, 6000),
	(1, 23, '2023-01-02', '09:00', 4, 4000),
	(1, 1, '2023-01-01', '09:00', 4, 4000),
	(2, 3, '2023-03-21', '10:00', 3, 3600),
	(3, 3, '2023-02-11', '14:00', 1, 3000),
	(4, 5, '2023-04-01', '08:00', 5, 5000),
	(5, 5, '2023-05-15', '11:00', 4, 4800),
	(6, 7, '2023-06-30', '12:00', 3, 3600),
	(7, 9, '2023-07-12', '13:00', 2, 3000),
	(8, 11, '2023-08-01', '14:00', 5, 7500),
	(9, 13, '2023-09-21', '15:00', 1, 6000),
	(5, 23, '2024-05-15', '11:00', 4, 4800),
	(4, 24, '2024-04-01', '08:00', 5, 5000),
	(9, 46, '2024-09-21', '15:00', 1, 6000),
	(6, 4, '2024-06-30', '12:00', 3, 3600),
	(7, 3, '2024-07-12', '13:00', 2, 3000),
	(8, 2, '2024-08-01', '14:00', 5, 7500),
	(9, 1, '2024-09-21', '15:00', 1, 6000),
	(6, 1, '2024-01-01', '09:00', 4, 4000),
	(7, 2, '2024-03-21', '10:00', 3, 3600),
	(8, 3, '2024-02-11', '14:00', 1, 3000),
	(9, 4, '2024-04-01', '08:00', 5, 5000),
	(1, 5, '2024-05-15', '11:00', 4, 4800),
	(2, 6, '2024-06-30', '12:00', 3, 3600),
	(3, 7, '2024-07-12', '13:00', 2, 3000),
	(4, 8, '2024-08-01', '14:00', 5, 7500),
	(5, 9, '2024-09-21', '15:00', 1, 6000),
	(6, 10, '2024-01-01', '09:00', 4, 4000),
	(7, 11, '2024-03-21', '10:00', 3, 3600),
	(8, 12, '2024-02-11', '14:00', 1, 3000),
	(1, 48, '2024-01-01', '09:00', 4, 4000),
	(2, 50, '2024-03-21', '10:00', 3, 3600),
	(1, 9, '2024-01-01', '09:00', 4, 4000),
	(2, 8, '2024-03-21', '10:00', 3, 3600),
	(3, 7, '2024-02-11', '14:00', 1, 3000),
	(4, 6, '2024-04-01', '08:00', 5, 5000),
	(5, 5, '2024-05-15', '11:00', 4, 4800),
	(6, 4, '2024-06-30', '12:00', 3, 3600),
	(7, 3, '2024-07-12', '13:00', 2, 3000),
	(7, 27, '2024-07-12', '13:00', 2, 3000),
	(8, 29, '2024-08-01', '14:00', 5, 7500),
	(9, 31, '2024-09-21', '15:00', 1, 6000),
	(1, 33, '2024-01-01', '09:00', 4, 4000),
	(2, 35, '2024-03-21', '10:00', 3, 3600),
	(3, 37, '2024-02-11', '14:00', 1, 3000),
	(4, 39, '2024-04-01', '08:00', 5, 5000),
	(5, 41, '2024-05-15', '11:00', 4, 4800),
	(6, 43, '2024-06-30', '12:00', 3, 3600),
	(7, 45, '2024-07-12', '13:00', 2, 3000),
	(8, 47, '2024-08-01', '14:00', 5, 7500),
	(1, 15, '2023-01-01', '09:00', 4, 4000),
	(2, 17, '2023-03-21', '10:00', 3, 3600),
	(3, 19, '2023-02-11', '14:00', 2, 3000),
	(4, 21, '2023-04-01', '08:00', 5, 5000),
	(5, 23, '2023-05-15', '11:00', 4, 4800),
	(6, 25, '2023-06-30', '12:00', 3, 3600),
	(7, 27, '2023-07-12', '13:00', 2, 3000),
	(8, 29, '2023-08-01', '14:00', 5, 7500),
	(9, 31, '2023-09-21', '15:00', 1, 6000),
	(1, 33, '2023-01-01', '09:00', 4, 4000),
	(2, 35, '2023-03-21', '10:00', 3, 3600),
	(3, 37, '2023-02-11', '14:00', 1, 3000),
	(4, 39, '2023-04-01', '08:00', 5, 5000),
	(5, 41, '2023-05-15', '11:00', 4, 4800),
	(6, 43, '2023-06-30', '12:00', 4, 3600),
	(7, 45, '2023-07-12', '13:00', 2, 3000),
	(8, 47, '2023-08-01', '14:00', 5, 7500),
	(9, 42, '2023-09-21', '15:00', 1, 6000),
	(2, 17, '2024-03-21', '10:00', 3, 3600),
	(3, 16, '2024-02-11', '14:00', 2, 3000),
	(4, 15, '2024-04-01', '08:00', 5, 5000),
	(5, 14, '2024-05-15', '11:00', 4, 4800),
	(6, 13, '2024-06-30', '12:00', 3, 3600),
	(7, 12, '2024-07-12', '13:00', 2, 3000),
	(8, 11, '2024-08-01', '14:00', 5, 7500),
	(9, 10, '2024-09-21', '15:00', 1, 6000),
	(8, 2, '2024-08-01', '14:00', 5, 7500),
	(9, 1, '2024-09-21', '15:00', 1, 6000),
	(1, 2, '2024-01-01', '09:00', 4, 4000),
	(2, 3, '2024-03-21', '10:00', 3, 3600),
	(3, 4, '2024-02-11', '14:00', 1, 3000),
	(4, 5, '2024-04-01', '08:00', 5, 5000),
	(5, 6, '2024-05-15', '11:00', 4, 4800),
	(6, 7, '2024-06-30', '12:00', 3, 3600)
 

 

 

 